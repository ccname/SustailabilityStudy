**redis基本数据类型及应用**

- string

  ```
  字符数据类型，方法set和get，一般做K，V存储
  应用：
  	1.缓存功能。利用redis支持高并发的热点，数据存于内存中，读写速度快，可以降低服务端数据库的压力
  	2.计数器。 许多系统都会使用Redis作为系统的实时计数器，可以快速实现计数和查询的功能。而且最终的数据结果可以按照特定的时间落地到数据库或者其它存储介质当中进行永久保存。
  	3.共享用户session。 用redis把用户的session集中管理起来，在获取和更新的时候都会很快完成，提高效率。
  ```

- hash

  ```
  适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去)
  应用：
  	1.存储，读取，修改用户属性。
  ```

- List  

  ```
  有序列表，先进先出，有序
  应用：
  	1.list可以按照范围查询，可以做分页，类似于微博的下拉刷新。
  	2.实现生产者消费者模式，生产者用push可以往队列中添加数据，消费者用pop从队列中获取数据。
  	3.最新消息优先展示的功能
  ```

- set

  ```
  无序集合，会自动去重。可以求交集，并集，差集
  应用：
  	1.两个人的好友列表放在两个集合，可以用交集求出共同好友。
  	2.唯一性，可以统计网站访问所有独立的IP。
  	3.好友推荐时，交集中大于某个阀值就可以推荐。
  ```

  

- Sorted set

  ```
  有序集合，
  应用：
  	1.网站排行榜。可以按照，点赞数，播放数，时间等方式排序
  	2.做带权重的队列，比如普通消息的score为1，重要消息的score为2，然后工作线程可以选择按score的倒序来获取工作任务。让重要的任务优先执行。
  ```

- 数据的持久化(RDB 和 AOF)

  ```
  提供了RDB(Redis DataBase)和AOF(Append Only File)两种方式进行持久化。RDB是把内存中的数据集以快照的方式写入磁盘，实际操作是fork子进程来完成，采用二进制压缩的方式存储。AOF是以文本日志的方式记录redis处理的每一个写入和删除的操作。
  
  RDB:
  	实现方式: 默认开启的是RDB的方式。
  	把整个文件以快照的方式存在一个单一文件中(某一时刻数据持久化到磁盘中)，比较适合做灾难性的备份，缺点是如果在备份完成之前宕机的话，会造成这段时间内的数据丢失，保存快照的时间可能会导致服务器暂时不可用。
  AOF:
  	实现方式：通过配置redis.conf文件开启AOF持久化。
  	1.把执行过的指令都追加到日志文件中，数据恢复时按照从前到后的指令重新执行一遍，有灵活的同步策略，支持每秒同步，每次修改时同步，最多丢失一秒中的数据。
  	2.因为采用了追加方式，如果不做任何处理的话，AOF文件会变得越来越大，为此，redis提供了AOF文件重写（rewrite）机制，即当AOF文件的大小超过所设定的阈值时，redis就会启动AOF文件的内容压缩，只保留可以恢复数据的最小指令集。
  	缺点：同样规模的数据，AOF文件体积要大于RDB文件，且恢复速度比较慢。
   
   RDB和AOF两种方式也可以同时使用，在这种情况下，如果redis重启的话，则会优先采用AOF方式来进行数据恢复，这是因为AOF方式的数据恢复完整度更高。
  ```

  

